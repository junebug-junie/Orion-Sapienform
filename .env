# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üåê Orion Mesh Global Environment
# Automatically sourced by all services
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

# Identify this node and project namespace dynamically
# (rebuild-services.sh auto-overwrites this with the real hostname)
PROJECT=orion-athena
NODE_NAME=athena

# Shared network for inter-service communication
NET=app-net

# Default mesh storage paths
STORAGE_ROOT=/mnt/storage-lukewarm
TELEMETRY_ROOT=/mnt/telemetry

# Default Redis connection (may be overridden per node or managed)
ORION_BUS_URL=redis://100.92.216.81:6379/0
ORION_BUS_ENFORCE_CATALOG=true
ORION_BUS_PORT=6379
REDIS_EXPORTER_PORT=9121
REDIS_DATA_VOL=${PROJECT}_redis_data

# Recall bus channels
RECALL_BUS_INTAKE=orion:exec:request:RecallService
RECALL_BUS_REPLY_DEFAULT=orion:exec:result:RecallService
RECALL_BUS_TELEMETRY=orion:recall:telemetry

# Default Postgres / GraphDB settings (if relevant)
POSTGRES_PORT=55432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=conjourney
POSTGRES_URI=postgresql://postgres:postgres@orion-sql-db:5432/conjourney
GRAPHDB_PORT=7200
GRAPHDB_URL=http://graphdb:7200
GRAPHDB_REPO=orion

# Recall SQL timeline (optional)
RECALL_ENABLE_SQL_TIMELINE=true
RECALL_SQL_SINCE_MINUTES=180
RECALL_SQL_TOP_K=10
RECALL_SQL_TIMELINE_TABLE=collapse_mirror
RECALL_SQL_TIMELINE_TS_COL=timestamp
RECALL_SQL_TIMELINE_TEXT_COL=summary
RECALL_SQL_TIMELINE_SESSION_COL=observer
RECALL_SQL_TIMELINE_NODE_COL=observer_state
RECALL_SQL_TIMELINE_TAGS_COL=tags

# Recall telemetry persistence (uses the shared Postgres URI)
# RECALL_PG_DSN will fall back to POSTGRES_URI if not set explicitly
# RECALL_PG_DSN=postgresql://postgres:postgres@orion-sql-db:5432/conjourney

# Default model + runtime settings
#MODEL=mistral:instruct
#BACKENDS=http://llm-brain:11434
USERS=2

# === ORION BUS CHANNELS (Titanium Contract) ===
# Core Events
CHANNEL_CORE_EVENTS=orion:core:events

# RDF Pipeline
CHANNEL_RDF_ENQUEUE=orion:rdf:enqueue
CHANNEL_RDF_CONFIRM=orion:rdf:confirm
CHANNEL_RDF_ERROR=orion:rdf:error
CHANNEL_WORKER_RDF=orion:rdf:worker

# Collapse/Telemetry Pipeline
CHANNEL_EVENTS_COLLAPSE=orion:collapse:intake
CHANNEL_EVENTS_TAGGED=orion:events:tagged
CHANNEL_COLLAPSE_TRIAGE=orion:collapse:triage
CHANNEL_COLLAPSE_INTAKE=orion:collapse:intake
COLLAPSE_MIRROR_STORE_PATH=/mnt/storage/collapse-mirrors/collapse_mirror_store.json
CHANNEL_COGNITION_TRACE_PUB=orion:cognition:trace

# Cortex Logging
CORTEX_LOG_CHANNEL=orion:cortex:logs

# System Health / Equilibrium
ORION_HEALTH_CHANNEL=orion:system:health
HEALTH_CHANNEL=${ORION_HEALTH_CHANNEL}
CHANNEL_SYSTEM_HEALTH=${ORION_HEALTH_CHANNEL}
CHANNEL_SPARK_SIGNAL=orion:spark:signal
CHANNEL_EQUILIBRIUM_SNAPSHOT=orion:equilibrium:snapshot
EQUILIBRIUM_EXPECTED_SERVICES=
EQUILIBRIUM_EXPECTED_SERVICES_PATH=
EQUILIBRIUM_GRACE_MULTIPLIER=3
EQUILIBRIUM_PUBLISH_INTERVAL_SEC=15
EQUILIBRIUM_WINDOWS_SEC=60,300,3600
EQUILIBRIUM_STATE_KEY=equilibrium:state
EQUILIBRIUM_COLLAPSE_MIRROR_INTERVAL_SEC=15
EQUILIBRIUM_COLLAPSE_MIRROR_INTERVAL_SEC=10

# Spark / State snapshots
CHANNEL_SPARK_STATE_SNAPSHOT=orion:spark:state:snapshot
SPARK_ROLLUP_TABLE=spark_state_rollups
ROLLUP_WINDOWS_SEC=60,300,3600
ROLLUP_INTERVAL_SEC=30
ROLLUP_RETENTION_HOURS=24
JOURNALER_PORT=8380

# Optional: if using managed Redis or external DB, uncomment and edit
# MANAGED_REDIS_URL=redis://user:pass@your-managed-redis:6379/0
# PRUNE=1  # uncomment for automatic prune on rebuild
# SKIP_BUS=1  # skip orion-bus if MANAGED_REDIS_URL is defined
