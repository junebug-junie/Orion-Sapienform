services:
  orion-biometrics:
    build:
      context: ../..
      dockerfile: services/orion-biometrics/Dockerfile
    restart: unless-stopped
    networks:
      - app-net
    env_file:
      - .env
    ports:
      - "8100:8100"
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
    runtime: nvidia

    volumes:
      - /mnt/services/Orion-Sapienform/orion/sensors:/orion/sensors # access host gpus
      - /mnt/storage/logs/biometrics/logs:/app/logs
      - /usr/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:ro # access to low level host
networks:
  app-net:
    external: true
