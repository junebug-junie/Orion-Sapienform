# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ§  Orion Recall â€” Unified RAG / Memory Brain
# Subscribes to recall requests, queries storage, returns chunks
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# --- Service Identity ---
SERVICE_NAME=recall
SERVICE_VERSION=0.1.0
PORT=8260

# --- Orion Bus Integration ---
ORION_BUS_ENABLED=true
ORION_BUS_URL=redis://100.92.216.81:6379/0

# --- Bus Channels ---
CHANNEL_RECALL_REQUEST=orion:recall:request
CHANNEL_RECALL_DEFAULT_REPLY_PREFIX=orion:recall:reply

# --- Default Retrieval Behavior ---
RECALL_DEFAULT_MAX_ITEMS=16
RECALL_DEFAULT_TIME_WINDOW_DAYS=30
RECALL_DEFAULT_MODE=hybrid   # short_term | deep | hybrid

# --- Source Toggles ---
RECALL_ENABLE_SQL_CHAT=true
RECALL_ENABLE_SQL_MIRRORS=true
RECALL_ENABLE_VECTOR=true
RECALL_ENABLE_RDF=false

# --- Postgres (SQL) ---
RECALL_PG_DSN=postgresql://postgres:postgres@orion-athena-sql-db:5432/conjourney

# Assumed table/column names (tweak to your schema as needed)
RECALL_SQL_CHAT_TABLE=chat_history_log
RECALL_SQL_CHAT_TEXT_COL=prompt
RECALL_SQL_CHAT_RESPONSE_COL=response
RECALL_SQL_CHAT_CREATED_AT_COL=created_at

RECALL_SQL_MIRROR_TABLE=collapse_mirror
RECALL_SQL_MIRROR_TITLE_COL=title
RECALL_SQL_MIRROR_BODY_COL=body
RECALL_SQL_MIRROR_TAGS_COL=tags
RECALL_SQL_MIRROR_CREATED_AT_COL=timestamp

# Collapse Mirror extra semantic fields
RECALL_SQL_MIRROR_OBSERVER_COL=observer
RECALL_SQL_MIRROR_TRIGGER_COL=trigger
RECALL_SQL_MIRROR_OBSERVER_STATE_COL=observer_state
RECALL_SQL_MIRROR_FIELD_RESONANCE_COL=field_resonance
RECALL_SQL_MIRROR_INTENT_COL=intent
RECALL_SQL_MIRROR_TYPE_COL=type
RECALL_SQL_MIRROR_EMERGENT_ENTITY_COL=emergent_entity
RECALL_SQL_MIRROR_SUMMARY_COL=summary
RECALL_SQL_MIRROR_MANTRA_COL=mantra
RECALL_SQL_MIRROR_CAUSAL_ECHO_COL=causal_echo

# --- Collapse Enrichment table (semantic tags) ---
RECALL_SQL_MIRROR_ENRICH_TABLE=collapse_enrichment
RECALL_SQL_MIRROR_ENRICH_FK_COL=collapse_id
RECALL_SQL_MIRROR_ENRICH_TAGS_COL=tags
RECALL_SQL_MIRROR_ENRICH_ENTITIES_COL=entities
RECALL_SQL_MIRROR_ENRICH_SALIENCE_COL=salience
RECALL_SQL_MIRROR_ENRICH_TS_COL=ts

# --- Chroma (vector memories) ---
VECTOR_DB_HOST=${PROJECT}-vector-db
VECTOR_DB_PORT=8000
VECTOR_DB_COLLECTION=orion_main_store

# For recall-specific override (optional, can be omitted)
RECALL_VECTOR_BASE_URL=
RECALL_VECTOR_COLLECTIONS=

RECALL_VECTOR_TIMEOUT_SEC=5.0
RECALL_VECTOR_MAX_ITEMS=24

# --- GraphDB (RDF memories) ---
GRAPHDB_URL=http://${PROJECT}-graphdb:7200
GRAPHDB_REPO=collapse
GRAPHDB_USER=admin
GRAPHDB_PASS=admin

# Optional direct override (otherwise built from GRAPHDB_URL + GRAPHDB_REPO)
RECALL_RDF_ENDPOINT_URL=
RECALL_RDF_TIMEOUT_SEC=5.0
RECALL_RDF_ENABLE_SUMMARIES=false  # if true, we may later call another service to summarize

# --- Tensors / Ranker toggles (future) ---
RECALL_TENSOR_RANKER_ENABLED=false
RECALL_TENSOR_RANKER_MODEL_PATH=/mnt/storage-warm/orion/recall/tensor-ranker.pt
