# schema/graphdb_rules.txt
# Inference rule for deriving ancestry in memory chains

PREFIX cj: <http://conjourney.net/schema#>

# Rule: If A generated B and B generated C, then A indirectly generated C
[cj:indirectCausalLineage:
  (?a cj:generatedBy ?b)
  (?b cj:generatedBy ?c)
  ->
  (?a cj:generatedBy ?c)
]

# Rule: Memory events with the same thread_id belong to the same narrative thread
[cj:sameThread:
  (?a cj:thread_id ?tid)
  (?b cj:thread_id ?tid)
  notEqual(?a, ?b)
  ->
  (?a cj:sameThreadAs ?b)
] 

# Rule: If a memory was generated by an internal reflection, it is introspective
[cj:introspectiveLabel:
  (?m cj:origin "introspection")
  ->
  (?m cj:hasType "Introspective")
]

