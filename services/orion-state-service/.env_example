# ======================
# orion-state-service
# ======================

# Identity
SERVICE_NAME=state-service
SERVICE_VERSION=0.1.0
#NODE_NAME=athena
PORT=8270

# --- Orion Bus / Redis ---
#ORION_BUS_URL=redis://orion-redis:6379/0
ORION_BUS_ENFORCE_CATALOG=true
ORION_BUS_ENABLED=true

# --- Inputs ---
# Spark real-time state snapshots (published by orion-spark-introspector)
CHANNEL_SPARK_STATE_SNAPSHOT=orion:spark:state:snapshot
CHANNEL_BIOMETRICS_SUMMARY=orion:biometrics:summary
CHANNEL_BIOMETRICS_INDUCTION=orion:biometrics:induction
CHANNEL_BIOMETRICS_CLUSTER=orion:biometrics:cluster
BIOMETRICS_STALE_AFTER_SEC=90

# --- RPC Intake ---
STATE_REQUEST_CHANNEL=orion:state:request

# Legacy snapshot ack emission (spark.state.snapshot.ack)
STATE_SERVICE_EMIT_LEGACY_SNAPSHOT_ACK=true

# --- Cache ---
# If unset, defaults to ORION_BUS_URL
CACHE_REDIS_URL=${ORION_BUS_URL}
STATE_CACHE_PREFIX=orion:spark_state
PRIMARY_STATE_NODE=athena

# --- Postgres Hydration (durable recovery) ---
POSTGRES_URI=postgresql://postgres:postgres@orion-athena-sql-db:5432/conjourney
SPARK_TELEMETRY_TABLE=spark_telemetry
HYDRATE_LIMIT=500
