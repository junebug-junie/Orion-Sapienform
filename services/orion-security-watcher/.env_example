# -----------------------------
# Orion Security Watcher
# -----------------------------
SERVICE_NAME=security-watcher
SERVICE_VERSION=0.1.0
NODE_NAME=athena

ORION_BUS_ENABLED=true
ORION_BUS_ENFORCE_CATALOG=true
ORION_BUS_URL=redis://100.92.216.81:6379/0

# subscribe to the same channel vision edge publishes
VISION_EVENTS_PUBLISH_RAW=orion:vision:edge:raw
VISION_EVENTS_SUBSCRIBE_RAW=${VISION_EVENTS_PUBLISH_RAW}

# security event channels
CHANNEL_SECURITY_VISITS=orion:security:visits
CHANNEL_SECURITY_ALERTS=orion:security:alerts

# snapshot URL exposed inside docker network by vision edge
VISION_SNAPSHOT_URL=http://100.92.216.81:7100/snapshot.jpg
VISION_SNAPSHOT_PUBLIC_URL=

# core toggles
SECURITY_ENABLED=true
SECURITY_DEFAULT_ARMED=false
SECURITY_MODE=vacation_strict
# camera stream_id(s) from vision events, comma-separated, or blank for all
SECURITY_CAMERA_IDS=office-cam

# visit & detection thresholds
SECURITY_MIN_YOLO_SCORE=0.30
IDENTITY_CONFIDENCE_THRESHOLD=0.6

# rate limiting
SECURITY_GLOBAL_COOLDOWN_SEC=60
SECURITY_IDENTITY_COOLDOWN_SEC=300

# snapshots
SECURITY_SNAPSHOT_COUNT=3
SECURITY_SNAPSHOT_INTERVAL_SEC=2
SECURITY_SNAPSHOT_DIR=/mnt/telemetry/orion-security/alerts

# notifications
NOTIFY_MODE=inline          # inline | none (later: bus_only when you split)
NOTIFY_EMAIL_ENABLED=true
NOTIFY_EMAIL_SMTP_HOST=smtp.yourprovider.com
NOTIFY_EMAIL_SMTP_PORT=587
NOTIFY_EMAIL_SMTP_USERNAME=YOUR_SMTP_USER
NOTIFY_EMAIL_SMTP_PASSWORD=YOUR_SMTP_PASS
NOTIFY_EMAIL_USE_TLS=true
NOTIFY_EMAIL_FROM="Orion Security <orion-security@yourdomain>"
NOTIFY_EMAIL_TO=you@youremail

# persisted armed/mode state
SECURITY_STATE_PATH=/mnt/telemetry/orion-security/state.json

# === TITANIUM MIGRATION ===
CHANNEL_VISION_ARTIFACTS=vision.artifacts
CHANNEL_VISION_GUARD_SIGNAL=vision.guard.signal
CHANNEL_VISION_GUARD_ALERT=vision.guard.alert

# Vision Guard Config
GUARD_WINDOW_SECONDS=30
GUARD_EMIT_EVERY_SECONDS=5
GUARD_PERSON_MIN_CONF=0.4
GUARD_PERSON_MIN_COUNT=1
GUARD_SUSTAIN_SECONDS=2
GUARD_ALERT_COOLDOWN_SECONDS=60
