version: "3.4"

services:
  orion-dream:
    build: .
    image: orion-dream:latest
    container_name: orion-dream
    restart: unless-stopped
    environment:
      - SERVICE_NAME=orion-dream
      - SERVICE_VERSION=1.0.0
      - ORION_BUS_URL=${ORION_BUS_URL:-redis://orion-redis:6379/0}
      - ORION_BUS_ENABLED=${ORION_BUS_ENABLED:-true}
      - CHANNEL_DREAM_TRIGGER=orion:dream:trigger
      - POSTGRES_URI=${POSTGRES_URI:-postgresql://postgres:postgres@postgres:5432/conjourney}
      - GRAPHDB_URL=${GRAPHDB_URL:-http://graphdb:7200}
      - BRAIN_URL=${BRAIN_URL:-http://brain:8088}
      - NODE_NAME=${NODE_NAME:-unknown}
    ports:
      - "8620:8620"
    volumes:
      - ./logs:/app/logs
