version: "3.4"

services:
  orion-recall:
    build: .
    image: orion-recall:latest
    container_name: orion-recall
    restart: unless-stopped
    environment:
      - SERVICE_NAME=recall
      - SERVICE_VERSION=0.1.0
      - ORION_BUS_URL=${ORION_BUS_URL:-redis://orion-janus-bus-core:6379/0}
      - ORION_BUS_ENABLED=${ORION_BUS_ENABLED:-true}
      - RECALL_BUS_INTAKE=${RECALL_BUS_INTAKE:-orion-exec:request:RecallService}
      - RECALL_PG_DSN=${POSTGRES_URI:-postgresql://postgres:postgres@postgres:5432/conjourney}
      - VECTOR_DB_HOST=vector-db
      - GRAPHDB_URL=http://graphdb:7200
      - PORT=8260
      - NODE_NAME=${NODE_NAME:-unknown}
    ports:
      - "8260:8260"
