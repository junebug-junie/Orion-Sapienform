{
  "envelope_sites": [
    {
      "file": "services/orion-llm-gateway/app/main.py",
      "hits": [
        {
          "line": 42,
          "text": "return BaseEnvelope("
        },
        {
          "line": 65,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-host/app/main.py",
      "hits": [
        {
          "line": 200,
          "text": "reply_envelope = BaseEnvelope("
        },
        {
          "line": 274,
          "text": "envelope = BaseEnvelope("
        },
        {
          "line": 373,
          "text": "dummy_env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-host/scripts/publish_test_task.py",
      "hits": [
        {
          "line": 35,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-host/scripts/verify_cortex_vision.py",
      "hits": [
        {
          "line": 40,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-exec/app/collapse_verbs.py",
      "hits": [
        {
          "line": 57,
          "text": "envelope = BaseEnvelope("
        },
        {
          "line": 105,
          "text": "envelope = BaseEnvelope("
        },
        {
          "line": 154,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-exec/app/main.py",
      "hits": [
        {
          "line": 104,
          "text": "return BaseEnvelope("
        },
        {
          "line": 197,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-exec/app/clients.py",
      "hits": [
        {
          "line": 49,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 97,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 138,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 183,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 229,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-exec/app/executor.py",
      "hits": [
        {
          "line": 408,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 463,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-dream/app/main.py",
      "hits": [
        {
          "line": 101,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-dream/app/dream_cycle.py",
      "hits": [
        {
          "line": 379,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-gateway/app/bus_client.py",
      "hits": [
        {
          "line": 46,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 184,
          "text": "reply_env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-recall/app/worker.py",
      "hits": [
        {
          "line": 246,
          "text": "return BaseEnvelope("
        },
        {
          "line": 257,
          "text": "return BaseEnvelope("
        },
        {
          "line": 268,
          "text": "return BaseEnvelope("
        },
        {
          "line": 279,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-recall/app/service.py",
      "hits": [
        {
          "line": 71,
          "text": "return BaseEnvelope("
        },
        {
          "line": 86,
          "text": "return BaseEnvelope("
        },
        {
          "line": 113,
          "text": "out = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-window/app/main.py",
      "hits": [
        {
          "line": 147,
          "text": "reply_env = BaseEnvelope("
        },
        {
          "line": 162,
          "text": "broadcast_env = BaseEnvelope("
        },
        {
          "line": 219,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-spark-introspector/app/worker.py",
      "hits": [
        {
          "line": 402,
          "text": "req = BaseEnvelope("
        },
        {
          "line": 472,
          "text": "completed = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-state-service/app/main.py",
      "hits": [
        {
          "line": 101,
          "text": "return BaseEnvelope("
        },
        {
          "line": 112,
          "text": "return BaseEnvelope("
        },
        {
          "line": 128,
          "text": "return BaseEnvelope("
        },
        {
          "line": 137,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-hub/scripts/api_routes.py",
      "hits": [
        {
          "line": 284,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-hub/scripts/websocket_handler.py",
      "hits": [
        {
          "line": 204,
          "text": "env_sql = BaseEnvelope("
        },
        {
          "line": 220,
          "text": "env_spark = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-hub/scripts/bus_clients/cortex_client.py",
      "hits": [
        {
          "line": 27,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-hub/scripts/bus_clients/tts_client.py",
      "hits": [
        {
          "line": 27,
          "text": "envelope = BaseEnvelope("
        },
        {
          "line": 74,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-council/app/main.py",
      "hits": [
        {
          "line": 103,
          "text": "reply_env = BaseEnvelope("
        },
        {
          "line": 118,
          "text": "broadcast_env = BaseEnvelope("
        },
        {
          "line": 144,
          "text": "out_env = BaseEnvelope("
        },
        {
          "line": 209,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-scribe/app/main.py",
      "hits": [
        {
          "line": 114,
          "text": "reply_env = BaseEnvelope("
        },
        {
          "line": 129,
          "text": "ack_env = BaseEnvelope("
        },
        {
          "line": 153,
          "text": "ack_env = BaseEnvelope("
        },
        {
          "line": 210,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-orch/app/orchestrator.py",
      "hits": [
        {
          "line": 365,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-orch/app/clients.py",
      "hits": [
        {
          "line": 39,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 101,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-cortex-orch/app/tests/smoke_bus_worker.py",
      "hits": [
        {
          "line": 108,
          "text": "response = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-retina/app/main.py",
      "hits": [
        {
          "line": 77,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-planner-react/app/bus_listener.py",
      "hits": [
        {
          "line": 78,
          "text": "out_env = BaseEnvelope("
        },
        {
          "line": 104,
          "text": "err_env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-planner-react/app/api.py",
      "hits": [
        {
          "line": 205,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 272,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-collapse-mirror/app/routes.py",
      "hits": [
        {
          "line": 34,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-collapse-mirror/app/bus_runtime.py",
      "hits": [
        {
          "line": 90,
          "text": "triage_env = BaseEnvelope("
        },
        {
          "line": 101,
          "text": "write_envelope = BaseEnvelope("
        },
        {
          "line": 146,
          "text": "return BaseEnvelope("
        },
        {
          "line": 172,
          "text": "return BaseEnvelope("
        },
        {
          "line": 186,
          "text": "return BaseEnvelope("
        },
        {
          "line": 201,
          "text": "intake_env = BaseEnvelope("
        },
        {
          "line": 211,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-agent-chain/app/bus_listener.py",
      "hits": [
        {
          "line": 77,
          "text": "resp = BaseEnvelope("
        },
        {
          "line": 88,
          "text": "error_env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-agent-chain/app/planner_rpc.py",
      "hits": [
        {
          "line": 39,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-vision-edge/app/capture_worker.py",
      "hits": [
        {
          "line": 90,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-power-guard/app/main.py",
      "hits": [
        {
          "line": 177,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-agent-council/app/llm_client.py",
      "hits": [
        {
          "line": 70,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-agent-council/app/publisher.py",
      "hits": [
        {
          "line": 24,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-biometrics/app/main.py",
      "hits": [
        {
          "line": 46,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-equilibrium-service/app/service.py",
      "hits": [
        {
          "line": 169,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 185,
          "text": "signal_env = BaseEnvelope("
        },
        {
          "line": 243,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-chat-memory/app/main.py",
      "hits": [
        {
          "line": 167,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 233,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/README.md",
      "hits": [
        {
          "line": 192,
          "text": "Bus->>Ingest: Envelope (allowlist match)"
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/app/service.py",
      "hits": [
        {
          "line": 146,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 159,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 174,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/app/rpc/server.py",
      "hits": [
        {
          "line": 82,
          "text": "out = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/scripts/rpc_smoke_test.py",
      "hits": [
        {
          "line": 34,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/scripts/publish_sample_envelopes.py",
      "hits": [
        {
          "line": 26,
          "text": "metric_env = BaseEnvelope("
        },
        {
          "line": 36,
          "text": "snapshot_env = BaseEnvelope("
        },
        {
          "line": 46,
          "text": "unknown_env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "scripts/smoke_vector_upsert.py",
      "hits": [
        {
          "line": 42,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "scripts/smoke_equilibrium.py",
      "hits": [
        {
          "line": 48,
          "text": "env = BaseEnvelope(kind=\"system.health.v1\", source=ServiceRef(name=svc, node=\"local\", version=\"0.0.0\"), payload=hb.model_dump(mode=\"json\"))"
        }
      ]
    },
    {
      "file": "scripts/test_recall_harness.py",
      "hits": [
        {
          "line": 82,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "scripts/smoke_bus_publish_pad.py",
      "hits": [
        {
          "line": 35,
          "text": "envelope = BaseEnvelope("
        }
      ]
    },
    {
      "file": "scripts/smoke_supervisor.py",
      "hits": [
        {
          "line": 29,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "scripts/test_concept_induction_publish.py",
      "hits": [
        {
          "line": 17,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/spark/concept_induction/summarizer.py",
      "hits": [
        {
          "line": 75,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/spark/concept_induction/bus_worker.py",
      "hits": [
        {
          "line": 90,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 99,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 119,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/spark/concept_induction/tests/test_concept_induction.py",
      "hits": [
        {
          "line": 20,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/cognition/tests/test_reflect_recall_integration.py",
      "hits": [
        {
          "line": 34,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/cognition/hub_gateway/bus_harness.py",
      "hits": [
        {
          "line": 65,
          "text": "env = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/core/bus/bus_schemas.py",
      "hits": [
        {
          "line": 50,
          "text": "class BaseEnvelope(BaseModel):"
        },
        {
          "line": 138,
          "text": "return BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/core/bus/bus_schemas.py",
      "hits": [
        {
          "line": 151,
          "text": "class Envelope(BaseEnvelope, Generic[PayloadT]):"
        }
      ]
    },
    {
      "file": "orion/core/bus/bus_service_chassis.py",
      "hits": [
        {
          "line": 135,
          "text": "env = BaseEnvelope("
        },
        {
          "line": 156,
          "text": "v1_env = BaseEnvelope("
        },
        {
          "line": 178,
          "text": "out = BaseEnvelope("
        }
      ]
    },
    {
      "file": "orion/schemas/cortex/schemas.py",
      "hits": [
        {
          "line": 62,
          "text": "# 3. The Envelope (Orch -> Exec)"
        }
      ]
    }
  ],
  "derive_child_sites": [
    {
      "file": "services/orion-meta-tags/app/main.py",
      "hits": [
        {
          "line": 97,
          "text": "out_env = envelope.derive_child("
        }
      ]
    },
    {
      "file": "services/orion-security-watcher/app/bus_worker.py",
      "hits": [
        {
          "line": 51,
          "text": "alert_env = env.derive_child("
        },
        {
          "line": 104,
          "text": "sig_env = env.derive_child("
        }
      ]
    },
    {
      "file": "services/orion-whisper-tts/app/tts_worker.py",
      "hits": [
        {
          "line": 140,
          "text": "response_envelope = envelope.derive_child("
        },
        {
          "line": 171,
          "text": "error_envelope = envelope.derive_child("
        }
      ]
    },
    {
      "file": "services/orion-vision-edge/app/detector_worker.py",
      "hits": [
        {
          "line": 197,
          "text": "health_env = env.derive_child("
        },
        {
          "line": 236,
          "text": "out_env = env.derive_child("
        },
        {
          "line": 246,
          "text": "raw_env = env.derive_child("
        },
        {
          "line": 261,
          "text": "err_env = env.derive_child("
        }
      ]
    },
    {
      "file": "services/orion-landing-pad/app/service.py",
      "hits": [
        {
          "line": 123,
          "text": "env = item.envelope.derive_child("
        },
        {
          "line": 131,
          "text": "signal_env = env.derive_child("
        }
      ]
    }
  ],
  "schema_id_sites": [
    {
      "file": "services/orion-vision-host/app/main.py",
      "hits": [
        {
          "line": 201,
          "text": "schema_id=\"vision.task.result\","
        },
        {
          "line": 275,
          "text": "schema_id=\"vision.artifact\","
        },
        {
          "line": 374,
          "text": "schema_id=\"http\", schema_version=\"1\", kind=\"http\", source=\"http\", correlation_id=corr_id, payload={}"
        }
      ]
    },
    {
      "file": "services/orion-vision-host/scripts/publish_test_task.py",
      "hits": [
        {
          "line": 36,
          "text": "schema_id=\"vision.task.request\","
        }
      ]
    },
    {
      "file": "services/orion-vision-host/scripts/verify_cortex_vision.py",
      "hits": [
        {
          "line": 41,
          "text": "schema_id=\"vision.window.request\","
        }
      ]
    },
    {
      "file": "services/orion-cortex-exec/app/executor.py",
      "hits": [
        {
          "line": 456,
          "text": "schema_id=\"CollapseMirrorEntryV1\","
        }
      ]
    },
    {
      "file": "services/orion-vision-window/app/main.py",
      "hits": [
        {
          "line": 148,
          "text": "schema_id=\"vision.window.result\","
        },
        {
          "line": 163,
          "text": "schema_id=\"vision.window\","
        },
        {
          "line": 220,
          "text": "schema_id=\"vision.window\","
        }
      ]
    },
    {
      "file": "services/orion-vision-council/app/main.py",
      "hits": [
        {
          "line": 104,
          "text": "schema_id=\"vision.council.result\","
        },
        {
          "line": 119,
          "text": "schema_id=\"vision.event.bundle\","
        },
        {
          "line": 145,
          "text": "schema_id=\"vision.event.bundle\","
        },
        {
          "line": 210,
          "text": "schema_id=\"cortex.chat.request\","
        }
      ]
    },
    {
      "file": "services/orion-vision-scribe/app/main.py",
      "hits": [
        {
          "line": 115,
          "text": "schema_id=\"vision.scribe.result\","
        },
        {
          "line": 130,
          "text": "schema_id=\"vision.scribe.ack\","
        },
        {
          "line": 154,
          "text": "schema_id=\"vision.scribe.ack\","
        },
        {
          "line": 211,
          "text": "schema_id=kind,"
        }
      ]
    },
    {
      "file": "services/orion-cortex-orch/app/orchestrator.py",
      "hits": [
        {
          "line": 354,
          "text": "schema_id=plan_request.__class__.__name__,"
        }
      ]
    },
    {
      "file": "services/orion-vision-retina/app/main.py",
      "hits": [
        {
          "line": 78,
          "text": "schema_id=\"vision.frame.pointer\","
        }
      ]
    },
    {
      "file": "services/orion-equilibrium-service/app/service.py",
      "hits": [
        {
          "line": 236,
          "text": "schema_id=\"CollapseMirrorEntryV2\","
        }
      ]
    }
  ],
  "summary": {
    "envelope_files": 59,
    "derive_child_files": 5,
    "schema_id_files": 10
  },
  "notes": [
    "Automated scan based on regex; not a type-check or runtime validation.",
    "Schema/model mapping verification requires manual review of Pydantic models."
  ]
}